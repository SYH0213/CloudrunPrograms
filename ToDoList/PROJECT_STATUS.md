# ToDoList Project Status (2025년 7월 16일)

## 현재까지 구현된 기능

*   **할 일 추가**: 새로운 할 일을 목록에 추가할 수 있습니다.
    *   중복된 내용의 할 일은 추가되지 않으며, 경고 메시지가 표시됩니다.
*   **할 일 완료/미완료**: 체크박스를 통해 할 일의 완료 상태를 변경할 수 있습니다.
*   **할 일 삭제**: 개별 할 일을 목록에서 삭제할 수 있습니다.
*   **할 일 수정**: 기존 할 일의 내용을 수정할 수 있습니다.
    *   수정 시 중복된 내용으로 변경할 수 없으며, 경고 메시지가 수정 페이지에 표시됩니다.
*   **완료된 할 일 모두 삭제**: 완료 상태인 모든 할 일을 한 번에 삭제할 수 있는 버튼이 추가되었습니다.
*   **할 일 필터링**: "모든 할 일", "진행 중인 할 일", "완료된 할 일"로 목록을 필터링하여 볼 수 있습니다.
*   **할 일 우선순위 설정**: 각 할 일에 '낮음', '보통', '높음' 우선순위를 설정할 수 있으며, 목록에 표시됩니다.
*   **할 일 기간 설정 및 달력 시각화**: 할 일에 시작일과 마감일을 설정할 수 있으며, FullCalendar.js를 사용하여 달력에 시각화됩니다. 마감일도 포함하여 표시됩니다.
*   **사용자 계정 및 인증**: 사용자 등록, 로그인, 로그아웃 기능을 구현하여 각 사용자가 자신만의 할 일 목록을 관리할 수 있습니다.
    *   비밀번호는 안전하게 해시되어 저장됩니다.
    *   회원가입 시 비밀번호 확인란을 통해 비밀번호 일치 여부를 검증합니다.
*   **닉네임 설정**: 회원가입 후 사용자가 닉네임을 설정할 수 있는 별도의 인터페이스를 제공합니다.
*   **전용 할 일 추가 페이지**: 할 일 추가 기능을 메인 페이지에서 분리하여 `/create_task` 전용 페이지에서 제공합니다. 각 입력 필드가 명확하게 구분되어 있습니다.
*   **회원가입/로그인 필드명 변경**: "사용자 이름" 필드명을 "아이디"로 변경했습니다.

## 마지막 작업 시 발생한 문제 및 해결책

*   **문제 1**: `jinja2.exceptions.UndefinedError: 'sqlite3.Row object' has no attribute 'priority'` 에러 발생.
*   **원인 1**: `app.py`의 `init_db()` 함수에 `priority` 컬럼을 추가했지만, 기존 `tasks.db` 파일이 새 스키마로 업데이트되지 않아 발생했습니다.
*   **해결책 1**: `tasks.db` 파일을 삭제하고 애플리케이션을 다시 실행하여 `priority` 컬럼이 포함된 새로운 데이터베이스를 생성해야 합니다.

*   **문제 2**: 달력에 마감일이 포함되지 않고 하루 전까지만 표시되는 문제 발생.
*   **원인 2**: FullCalendar.js의 `end` 날짜 처리 방식이 배타적(exclusive)이기 때문입니다.
*   **해결책 2**: `app.py`의 `/calendar_events` 엔드포인트에서 `end_date`에 하루를 더해서 FullCalendar에 전달하도록 수정했습니다.

*   **문제 3**: `TypeError: The view function for 'register' did not return a valid response.` 에러 발생.
*   **원인 3**: `register` 함수에서 `sqlite3.IntegrityError` (중복 사용자 이름) 발생 시 `return` 문이 누락되어 함수가 `None`을 반환했기 때문입니다.
*   **해결책 3**: `IntegrityError` 발생 시 `register.html` 템플릿을 다시 렌더링하도록 `return render_template('register.html')`을 추가했습니다.

*   **문제 4**: `sqlite3.OperationalError: no such table: users` 에러 발생.
*   **원인 4**: 데이터베이스 스키마 변경(users 테이블 추가, tasks 테이블에 user_id 추가) 후 기존 `tasks.db` 파일을 삭제하지 않았거나, 삭제 후 애플리케이션을 완전히 재시작하지 않아서 발생했습니다.
*   **해결책 4**: `tasks.db` 파일을 삭제하고 애플리케이션을 재시작하여 새로운 스키마가 적용된 데이터베이스를 생성했습니다.

## 다음 작업 시 참고 사항

*   **로컬 실행**: 프로젝트를 다시 시작하려면 **반드시 `tasks.db` 파일을 삭제한 후**, `pip install -r requirements.txt`로 의존성을 설치하고 `python app.py`로 실행하세요. (스키마 변경 시 기존 데이터는 유실됩니다.)
*   **데이터베이스 영속성**: 현재 `tasks.db`는 로컬 파일 시스템에 저장되므로, Cloud Run과 같은 서버리스 환경에서는 데이터가 유실됩니다. 영구적인 데이터 저장을 위해서는 Cloud SQL, Firestore 등 외부 데이터베이스 서비스 연동을 고려해야 합니다.
*   **보안**: `app.secret_key = 'super_secret_key_for_session_management'`는 개발용이며, 실제 배포 시에는 더 안전하고 복잡한 키를 사용해야 합니다.

## 다음 기획 제안 (선택 사항)

*   **작업 카테고리/태그**: 할 일에 카테고리나 태그를 추가하여 더 세분화된 분류 및 필터링 기능 제공.
*   **반복 작업 설정**: 주기적으로 반복되는 할 일을 자동 생성하는 기능.
*   **알림 기능**: 마감일이 임박한 할 일에 대한 알림 기능 (웹 알림 또는 이메일).